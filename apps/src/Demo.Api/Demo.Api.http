### ========================================
### Demo.Api - Consolidated Test Requests
### Demonstrates all Acontplus libraries and features
### ========================================
### Environment variables defined in http-client.env.json (Rider/IntelliJ)
### For Visual Studio, change @baseUrl manually or use settings.json

# @baseUrl = {{baseUrl}}
@baseUrl = https://localhost:7111

### ========================================
### 1. BARCODE & REPORTS
### ========================================

### Generate QR Code/Barcode
GET {{baseUrl}}/api/barcode?text=HelloWorld&includeLabel=true

### Generate Sample Invoice Report
GET {{baseUrl}}/api/report

### ========================================
### 2. USUARIO (USER) CRUD OPERATIONS
### ========================================

### Get all users (paginated)
GET {{baseUrl}}/api/usuario?pageIndex=1&pageSize=10

### Get user by ID
@userId=1
GET {{baseUrl}}/api/usuario/{{userId}}

### Create new user
POST {{baseUrl}}/api/usuario
Content-Type: application/json

{
  "username": "ivan",
  "email": "ivan@gmail.com"
}

### Update user
PUT {{baseUrl}}/api/usuario/{{userId}}
Content-Type: application/json

{
  "username": "emilio.senguana",
  "email": "sengua2000@gmail.dev"
}

### Delete user
DELETE {{baseUrl}}/api/usuario/{{userId}}

### ========================================
### 3. ADO REPOSITORY - ADVANCED QUERIES
### ========================================

### Get users (legacy ADO)
GET {{baseUrl}}/api/usuario/ado

### Get dynamic users
GET {{baseUrl}}/api/usuario/get-dynamic

### Get user count (scalar query)
GET {{baseUrl}}/api/usuario/count

### Check if username exists
GET {{baseUrl}}/api/usuario/exists/admin

### Get active users count
GET {{baseUrl}}/api/usuario/active-count

### Get paginated users (ADO)
GET {{baseUrl}}/api/usuario/paged-ado?pageIndex=1&pageSize=10&searchTerm=test&sortBy=CreatedAt&sortDirection=Desc

### Get paginated users with complex filters
GET {{baseUrl}}/api/usuario/paged-complex?pageIndex=1&pageSize=20&sortBy=Email

### Get paginated users from stored procedure
GET {{baseUrl}}/api/usuario/paged-sp?pageIndex=1&pageSize=15&sortBy=Username&sortDirection=Asc

### Bulk insert users
POST {{baseUrl}}/api/usuario/bulk
Content-Type: application/json

[
  { "username": "bulk_user_1", "email": "bulk1@example.com" },
  { "username": "bulk_user_2", "email": "bulk2@example.com" },
  { "username": "bulk_user_3", "email": "bulk3@example.com" }
]

### Execute batch operations
POST {{baseUrl}}/api/usuario/batch
Content-Type: application/json

[1, 2, 3, 4, 5]

### Test exception handling
GET {{baseUrl}}/api/usuario/test-exception/1

### Test custom error
GET {{baseUrl}}/api/usuario/test-custom-error/3

### ========================================
### 4. LOOKUP SERVICE
### ========================================

### Get lookups (cached) - No filters
GET {{baseUrl}}/api/lookups

### Get lookups with filters
GET {{baseUrl}}/api/lookups?filters[module]=test&filters[context]=general

### Get lookups with search term
GET {{baseUrl}}/api/lookups?searchTerm=admin

### Get lookups with sorting
GET {{baseUrl}}/api/lookups?sortBy=displayOrder&sortDirection=asc

### Get lookups with all parameters
GET {{baseUrl}}/api/lookups?searchTerm=user&sortBy=value&sortDirection=desc&filters[module]=test&filters[context]=general

### Refresh lookups cache
POST {{baseUrl}}/api/lookups/refresh?filters[module]=test&filters[context]=general

### ========================================
### 5. ORDERS (CQRS + EVENT BUS)
### ========================================

### Create order (triggers OrderCreatedEvent)
# @name createOrder
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "customerName": "John Doe",
  "productName": "Premium Widget",
  "quantity": 5,
  "price": 99.99
}

### Get order by ID
@orderId=1
GET {{baseUrl}}/api/orders/{{orderId}}

### Get all orders
GET {{baseUrl}}/api/orders

### ========================================
### 6. SALES ANALYTICS
### ========================================

### Get sales dashboard (last 30 days)
GET {{baseUrl}}/api/analytics/sales/dashboard?language=en

### Get sales dashboard (custom date range)
GET {{baseUrl}}/api/analytics/sales/dashboard?startDate=2025-01-01&endDate=2025-12-31&language=es

### Get real-time statistics
GET {{baseUrl}}/api/analytics/sales/realtime?language=en

### Get daily aggregated statistics
GET {{baseUrl}}/api/analytics/sales/aggregated?groupBy=day&language=en

### Get monthly aggregated statistics
GET {{baseUrl}}/api/analytics/sales/aggregated?groupBy=month&language=en

### Get revenue trends
GET {{baseUrl}}/api/analytics/sales/trends?metric=revenue&language=en

### ========================================
### 7. ADVANCED SERVICES USAGE
### ========================================

### Basic - Simple caching
GET {{baseUrl}}/api/AdvancedUsage/basic/hello

### Basic - Product retrieval with caching
GET {{baseUrl}}/api/AdvancedUsage/basic/products/123

### Intermediate - Device-aware content (mobile)
GET {{baseUrl}}/api/AdvancedUsage/intermediate/content
User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X) AppleWebKit/605.1.15

### Intermediate - Health monitoring
GET {{baseUrl}}/api/AdvancedUsage/intermediate/health

### Intermediate - Cache performance stats
GET {{baseUrl}}/api/AdvancedUsage/intermediate/cache-stats

### Enterprise - Security status
GET {{baseUrl}}/api/AdvancedUsage/enterprise/security-status

### Enterprise - Multi-tenant dashboard
GET {{baseUrl}}/api/AdvancedUsage/enterprise/dashboard
Authorization: Bearer YOUR_TOKEN
X-Client-ID: web-app
X-Tenant-ID: premium-tenant-001

### Enterprise - Audit logging
POST {{baseUrl}}/api/AdvancedUsage/enterprise/audit
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN
X-Client-ID: admin-portal
X-Tenant-ID: premium-tenant-001

{
  "action": "user_login",
  "resource": "authentication_service",
  "metadata": {
    "ipAddress": "192.168.1.100",
    "success": true
  }
}

### Advanced - Hybrid caching with fallback
GET {{baseUrl}}/api/AdvancedUsage/advanced/hybrid-cache/weather-data

### Advanced - Resilient operation
GET {{baseUrl}}/api/AdvancedUsage/advanced/resilient/payment-processing

### Advanced - Adaptive content (tablet)
GET {{baseUrl}}/api/AdvancedUsage/advanced/adaptive-content/news-article-123
User-Agent: Mozilla/5.0 (iPad; CPU OS 14_0 like Mac OS X) AppleWebKit/605.1.15

### ========================================
### 8. ENTERPRISE EXAMPLES
### ========================================

### Request context service
GET {{baseUrl}}/api/EnterpriseExamples/context

### Device detection
GET {{baseUrl}}/api/EnterpriseExamples/device

### Security headers
GET {{baseUrl}}/api/EnterpriseExamples/security-headers

### Test exception handling
GET {{baseUrl}}/api/EnterpriseExamples/test-exception

### ========================================
### 9. CONFIGURATION TESTS
### ========================================

### Test all services
GET {{baseUrl}}/api/ConfigurationTest/services

### Test cache service
GET {{baseUrl}}/api/ConfigurationTest/cache

### Test device detection
GET {{baseUrl}}/api/ConfigurationTest/device
User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X) AppleWebKit/605.1.15

### Test security headers
GET {{baseUrl}}/api/ConfigurationTest/security

### Test request context
GET {{baseUrl}}/api/ConfigurationTest/context
X-Client-ID: test-client
X-Tenant-ID: test-tenant

### ========================================
### 10. BILLING & CUSTOMER
### ========================================

### Get customer by ID card (SRI validation)
@idCard=1105246605001
GET {{baseUrl}}/api/customer/by-id-card?idCard={{idCard}}&sriOnly=true

### Download ATS report
GET {{baseUrl}}/api/ats/download?fromDate=2025-03-01&toDate=2025-03-31

###
